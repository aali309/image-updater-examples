This is a sample Argo CD application applicationset. The appset uses list generator to
generate 2 Argo CD applications:
* `app1`: sourced from `source/overlays/app1`
* `app2`: sourced from `source/overlays/app2`

`deployment.yaml` uses an old version of nginx: `1.10.0`, and upon running
image-updater, the container image tag should be updated to `1.11.x` for app1,
and to `1.12.x` for app2.

This sample can be run with write-back-method `git` with the following annotations
on `app1.yaml` and `app2.yaml`:
```yaml
    argocd-image-updater.argoproj.io/write-back-method: git:secret:argocd/git-creds
    argocd-image-updater.argoproj.io/write-back-target: kustomization
```
The default `argocd` write-back-target can be configured by removing the above 2 annotations,
or by setting write-back-target to `argocd`. But this mode does not quite work with appset
(see https://github.com/argoproj-labs/argocd-image-updater/issues/186,
https://github.com/argoproj-labs/argocd-image-updater/issues/400)
```yaml
    argocd-image-updater.argoproj.io/write-back-method: argocd
```

## test appset
```bash
# to create the secret to access the git repo, required if using git write-back-method
kubectl -n argocd create secret generic git-creds --from-literal=username=xxx --from-literal=password=xxx

# to install appset
kubectl apply -f appset/appset.yaml

# to view the appset
kubectl get -n argocd appset
NAME     AGE
appset   62s

# to view all apps, including those generated by the appset
kubectl get -n argocd apps
NAME   SYNC STATUS   HEALTH STATUS
app1   Synced        Healthy
app2   Synced        Healthy

# to run image-updater from the command line
argocd-image-updater/dist/argocd-image-updater run
... ...

# to view details of the appset and apps
kubectl describe -n argocd app app1
kubectl describe -n argocd app app2
kubectl describe -n argocd appset appset
... ...
  Resources:
    Group:  argoproj.io
    Health:
    Kind:       Application
    Name:       app1
    Namespace:  argocd
    Version:    v1alpha1
    Group:      argoproj.io
    Health:
    Kind:       Application
    Name:       app2
    Namespace:  argocd
    Version:    v1alpha1
Events:
  Type    Reason   Age    From                       Message
  ----    ------   ----   ----                       -------
  Normal  created  2m27s  applicationset-controller  created Application "app1"
  Normal  created  2m27s  applicationset-controller  created Application "app2"
  
# to delete the root app
kubectl delete -f appset/appset.yaml

```
